# {{ ansible_managed }}
is_master = true
node_id_file = /etc/graylog/server/node-id
password_secret = {{ password_secret }}
root_password_sha2 = {{ graylog_root_password_sha2 }}
plugin_dir = /usr/share/graylog-server/plugin
rest_listen_uri = http://{{ client_address }}:12900
rest_transport_uri = http://{{ client_address }}:12900
web_listen_uri = http://0.0.0.0:9000
rotation_strategy = count
elasticsearch_max_docs_per_index = 20000000
elasticsearch_max_number_of_indices = 20
retention_strategy = delete
#elasticsearch_shards = 1
#elasticsearch_replicas = 0
elasticsearch_index_prefix = graylog
allow_leading_wildcard_searches = false
allow_highlighting = false
elasticsearch_hosts = http://{{ client_address }}:9200
elasticsearch_cluster_name = graylog
#elasticsearch_discovery_zen_ping_multicast_enabled = false
elasticsearch_discovery_zen_ping_unicast_hosts = {{ client_address }}:9300
elasticsearch_analyzer = standard
elasticsearch_http_enabled = false
elasticsearch_network_bind_host = {{ client_address }}
elasticsearch_network_publish_host = {{ client_address }}
output_batch_size = 500
output_flush_interval = 1
output_fault_count_threshold = 5
output_fault_penalty_seconds = 30
processbuffer_processors = 5
outputbuffer_processors = 3
processor_wait_strategy = blocking
ring_size = 65536
inputbuffer_ring_size = 65536
inputbuffer_processors = 2
inputbuffer_wait_strategy = blocking
message_journal_enabled = true
message_journal_dir = /var/lib/graylog-server/journal
dead_letters_enabled = false
lb_recognition_period_seconds = 3
mongodb_useauth = true
mongodb_host = 127.0.0.1
mongodb_user = {{ mongodb_user }}
mongodb_password = {{ mongodb_password }}
mongodb_database = {{ mongodb_database_name }}
mongodb_port = 27017
mongodb_max_connections = 100
mongodb_threads_allowed_to_block_multiplier = 5
transport_email_enabled = false
transport_email_hostname = mail.example.com
transport_email_port = 587
transport_email_use_auth = true
transport_email_use_tls = true
transport_email_use_ssl = true
transport_email_auth_username = you@example.com
transport_email_auth_password = secret
transport_email_subject_prefix = [graylog]
transport_email_from_email = graylog@example.com
message_cache_spool_dir = /var/lib/graylog-server/message-cache-spool

