- name: Configure CENTOS
  hosts: 
    - manager
    - worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: centos }
    
- name: Install EPEL Repositories on all Servers
  hosts: 
    - manager
    - worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: epel }  

- name: Install Consul Server on mesos-master
  hosts: manager
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: consul }
 
- name: Install REXRAY on worker
  hosts: 
    - worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: rexray } 

- name: Install DOCKER on worker
  hosts: 
    - worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: docker }

- name: Install DNSMASQ on all Servers
  hosts: 
    - manager
    - worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: dnsmasq }


- name: Install MESOS on mesos-master
  hosts: manager
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: mesos-master }

- name: Install MESOS on mesos-slave
  hosts: worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: mesos-slave }

- name: Install WEAVE on mesos-slave
  hosts: worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: weave }

- name: Install WEAVESCPOPE on mesos-slave
  hosts: worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: weavescope }    

- name: Install REGISTRATOR on mesos-slave
  hosts: worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: registrator }

- name: Install MARATHON on manager
  hosts: manager
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: marathon }   

- name: Install PROMETHEUS on all servers
  hosts: prometheus
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: prometheus }

- name: Install PROMETHEUS haproxy-exporter on haproxy server
  hosts: haproxy
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: prometheus-haproxy-exporter }    

- name: Install CADVISOR on mesos-slave
  hosts: worker
  become: true
  become_user: root
  become_method: sudo
  roles:
    - { role: cadvisor }    
